### main.ts の機能・仕様解説

このコードはスクロール連動型のカードスタックアニメーションの実装です。GSAP、ScrollTrigger、Lenis、lil-guiといったツールを使用しています。

#### スムーズスクロール (Lenis)

- **概要**: スムーズスクロールライブラリのLenisを導入し、スクロールの動きを滑らかにすることで、アニメーション体験を向上させています。
- **設定**: `new Lenis()` で初期化されており、`duration` (スクロールの継続時間)、`lerp` (補間係数)、`easing` (イージング関数) などの設定がカスタマイズ可能です。

#### アニメーションの中核 (GSAP & ScrollTrigger)

- **GSAPとScrollTriggerの連携**: GSAPがアニメーションを、ScrollTriggerがスクロールイベントとアニメーションを連携させる役割を担っています。
- **`StackAnimation` クラス**:
    - アニメーションのロジックをカプセル化するために、`StackAnimation` というクラスが定義されています。
    - `rootSelector` を引数として受け取り、指定された要素内のカード群にアニメーションを適用します。
    - 必要なHTML要素（`.card-contents` や `.card-item`）が見つからない場合は、エラーをスローして初期化を失敗させる堅牢な設計になっています。
- **アニメーションの仕組み**:
    - `ScrollTrigger.create()` を使用し、`.card-contents` 要素をトリガーとしています。
    - `pin: true` により、カード群が画面上部に固定（ピン留め）され、スクロール範囲内でアニメーションが実行されます。
    - `scrub: 1` は、スクロール量とアニメーションの進行度を滑らかに同期させます。
    - `snap` 設定により、各カードの切り替わりでスクロールがピタリと停止するスナップ機能が実装されています。

#### カスタマイズ性とレスポンシブ対応

- **設定パラメータ**:
    - `StackAnimationSettings` インターフェースを通じて、アニメーションの挙動を細かく調整できます。
    - `staggerAmount`: カード間のY軸オフセットの基本量。
    - `scrollPerCard`: 1枚のカードをめくるために必要なスクロール量（ピクセル）。
    - `offsetFactor` / `scaleFactor`: 後ろのカードほどオフセットやスケールを小さくする係数。
- **レスポンシブ設定**:
    - `responsive` プロパティを使用することで、特定のブレークポイント（例: `'max-width: 768px'`）ごとに異なる設定を適用できます。
    - ウィンドウのリサイズを監視し、横幅が変わった場合にアニメーションを再セットアップすることで、レスポンシブな挙動を保証しています。

#### 開発・デバッグ機能

- **lil-guiによるデバッグUI**:
    - `gui: true` の設定により、lil-guiライブラリを使ったデバッグ用のUIが表示されます。
    - このUIを通じて、アニメーションの各種パラメータをリアルタイムで変更し、挙動を確認できます。
- **コールバック関数**:
    - `onSnapComplete`: スナップ完了時に実行されるカスタムコールバックです。
    - `onUpdate`: アニメーションが更新されるたびに実行されるカスタムコールバックです。
    - これらのフックを利用して、特定のアニメーションのタイミングで追加の処理を行うことができます。
